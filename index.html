<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Bedrock Cost Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* Light theme variables */
            --primary-color: #2563eb;
            --secondary-color: #10b981;
            --background-color: #f1f5f9;
            --card-color: #ffffff;
            --text-color: #1e293b;
            --border-color: #e2e8f0;
            --hover-color: #1d4ed8;
            --error-color: #ef4444;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --transition: all 0.2s ease;
            --font-size-sm: 0.75rem;
            --font-size-base: 0.875rem;
            --font-size-lg: 1rem;
            
            /* Responsive variables */
            --container-padding: 0.75rem;
            --grid-gap: 0.5rem;
            --input-min-width: 200px;
            --tab-button-padding: 0.375rem 0.75rem;
            --results-container-width: 40%;
            --details-container-width: 55%;
            --input-group-margin: 0.5rem;
        }

        [data-theme="dark"] {
            --primary-color: #3b82f6;
            --secondary-color: #34d399;
            --background-color: #0f172a;
            --card-color: #1e293b;
            --text-color: #f1f5f9;
            --border-color: #334155;
            --hover-color: #60a5fa;
            --error-color: #f87171;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
        }

        /* Add smooth transition for theme switching */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.4;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: var(--container-padding);
            margin: 0;
        }

        .calculator-container {
            width: 100%;
            max-width: 1200px;
            background-color: var(--card-color);
            border-radius: 0.75rem;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 2rem);
            padding: var(--container-padding);
            gap: var(--grid-gap);
        }

        .tab-buttons {
            display: flex;
            background-color: var(--background-color);
            padding: 0.25rem;
            gap: 0.25rem;
            border-bottom: 1px solid var(--border-color);
        }

        .tab-button {
            padding: var(--tab-button-padding);
            border-radius: 0.375rem;
            font-weight: 500;
            font-size: var(--font-size-sm);
            color: var(--text-color);
            background-color: transparent;
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .tab-button:hover {
            background-color: var(--card-color);
        }

        .tab-button.active {
            background-color: var(--primary-color);
            color: white;
        }

        .tab-content {
            flex: 1;
            display: none;
            padding: 1rem;
            overflow-y: auto;
            height: calc(100vh - 120px);
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        .calculator-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--text-color);
            margin: 0.25rem 0;
            text-align: center;
        }

        .inputs-container {
            margin-bottom: 0.1rem;
        }

        .button-group {
            margin: var(--section-margin) 0;
            gap: 0.1rem;
        }

        .results-details-container {
            display: flex;
            gap: var(--grid-gap);
            flex: 1;
            min-height: 0;
            margin-top: var(--section-margin);
        }

        .results-container {
            flex: 0 0 40%;
            background: var(--card-color);
            border-radius: 0.5rem;
            padding: 0.75rem;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            overflow-y: auto;
            max-height: 100%;
        }

        .detailed-breakdown {
            flex: 0 0 55%;
            background: var(--card-color);
            border-radius: 0.5rem;
            padding: 0.7rem;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            overflow-y: auto;
            max-height: 100%;
        }

        .detailed-step {
            background: var(--background-color);
            border-radius: 0.375rem;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            border: 1px solid var(--border-color);
        }

        .detailed-step:last-child {
            margin-bottom: 0;
        }

        .detailed-step h4 {
            color: var(--primary-color);
            font-size: var(--font-size-sm);
            font-weight: 600;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .detailed-step p {
            font-size: var(--font-size-sm);
            line-height: 1;
            margin: 0.125rem 0;
            color: var(--text-color);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.375rem;
            border-bottom: 1px solid var(--border-color);
            font-size: var(--font-size-sm);
            margin-bottom: 0.25rem;
        }

        .input-group {
            margin-bottom: var(--input-group-margin);
        }

        .input-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.25rem;
            color: var(--text-color);
            font-size: var(--font-size-sm);
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 0.375rem 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            background-color: var(--card-color);
            color: var(--text-color);
            font-size: var(--font-size-sm);
            transition: var(--transition);
            margin: 0.25rem 0;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .input-group .error {
            margin-top: 0.25rem;
            font-size: var(--font-size-sm);
            color: var(--error-color);
            min-height: 1rem;
        }

        .input-group input.error,
        .input-group select.error {
            border-color: var(--error-color);
            background-color: rgba(239, 68, 68, 0.05);
        }

        .input-group input.error + .error,
        .input-group select.error + .error {
            display: block;
        }

        .btn {
            flex: 1;
            padding: 0.375rem 0.75rem;
            border-radius: 0.375rem;
            font-weight: 500;
            font-size: var(--font-size-sm);
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .btn-calculate {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-calculate:hover {
            background-color: var(--hover-color);
            transform: translateY(-1px);
        }

        .btn-reset {
            background-color: var(--background-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .btn-reset:hover {
            background-color: var(--border-color);
            transform: translateY(-1px);
        }

        .copy-button {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: var(--background-color);
            border: 1px solid var(--border-color);
            color: var(--primary-color);
            padding: 0.375rem;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: var(--transition);
            z-index: 10;
        }

        .copy-button:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-1px);
        }

        .copy-success {
            position: absolute;
            top: 0.5rem;
            right: 3rem;
            background: var(--secondary-color);
            color: white;
            padding: 0.375rem 0.5rem;
            border-radius: 0.375rem;
            font-size: var(--font-size-sm);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
        }

        .copy-success.show {
            opacity: 1;
        }

        /* Responsive adjustments */
        @media (max-width: 1400px) {
            :root {
                --container-padding: 0.875rem;
                --grid-gap: 0.625rem;
                --input-min-width: 180px;
                --results-container-width: 45%;
                --details-container-width: 50%;
            }
            
            .calculator-container {
                max-width: 1100px;
            }
        }

        @media (max-width: 1200px) {
            :root {
                --container-padding: 0.75rem;
                --grid-gap: 0.5rem;
                --input-min-width: 160px;
                --results-container-width: 48%;
                --details-container-width: 48%;
            }
            
            .calculator-container {
                max-width: 1000px;
            }
        }

        @media (max-width: 992px) {
            :root {
                --container-padding: 0.5rem;
                --grid-gap: 0.375rem;
                --input-min-width: 140px;
                --tab-button-padding: 0.375rem 0.75rem;
                --input-group-margin: 0.375rem;
                --section-margin: 0.5rem;
            }
            
            .calculator-container {
                max-width: 900px;
            }
            
            .results-container,
            .detailed-breakdown {
                flex: 1;
                max-height: none;
                width: 100%;
            }
            
            .results-details-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .tab-buttons {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .tab-button {
                flex: 1 1 auto;
                min-width: 150px;
                text-align: center;
            }
        }

        @media (max-width: 768px) {
            :root {
                --container-padding: 0.375rem;
                --grid-gap: 0.25rem;
                --input-min-width: 100%;
                --tab-button-padding: 0.25rem 0.5rem;
                --input-group-margin: 0.25rem;
                --section-margin: 0.375rem;
            }
            
            .calculator-container {
                height: auto;
                min-height: 100vh;
            }
            
            .inputs-container {
                padding: 0.5rem;
            }
            
            .input-group {
                margin-bottom: 0.75rem;
            }
            
            .dropdown-row,
            .input-row {
                flex-direction: column;
                gap: 1rem;
            }
            
            .button-group {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .btn {
                width: 100%;
            }
            
            .tab-button {
                font-size: 0.75rem;
                padding: var(--tab-button-padding);
            }
            
            .tab-button i {
                margin-right: 0.25rem;
            }
            
            .results-container,
            .detailed-breakdown {
                padding: 0.5rem;
            }
            
            .result-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }
            
            .detailed-step {
                padding: 0.375rem;
            }
            
            .detailed-step h3 {
                font-size: 0.875rem;
            }
            
            .detailed-step p {
                font-size: 0.8125rem;
            }
        }

        @media (max-width: 480px) {
            :root {
                --container-padding: 0.25rem;
                --grid-gap: 0.125rem;
                --input-min-width: 120px;
                --input-group-margin: 0.125rem;
                --section-margin: 0.25rem;
            }
            
            .calculator-container {
                border-radius: 0.375rem;
            }
            
            .tab-button {
                min-width: 120px;
                font-size: 0.7rem;
            }
            
            .calculator-title {
                font-size: 1rem;
            }
            
            .input-group label {
                font-size: 0.75rem;
            }
            
            .input-group input,
            .input-group select {
                font-size: 0.75rem;
                padding: 0.25rem 0.375rem;
            }
        }

        /* Add landscape mode optimization */
        @media (max-height: 600px) and (orientation: landscape) {
            .calculator-container {
                height: auto;
                min-height: 100vh;
            }
            
            .tab-buttons {
                position: sticky;
                top: 0;
                z-index: 10;
                background-color: var(--background-color);
            }
            
            .results-details-container {
                max-height: calc(100vh - 200px);
                overflow-y: auto;
            }
        }

        /* Add high-DPI screen optimization */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .calculator-container {
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
        }

        /* Add print styles */
        @media print {
            .calculator-container {
                box-shadow: none;
                border: 1px solid var(--border-color);
            }
            
            .theme-toggle,
            .btn {
                display: none;
            }
            
            .results-container,
            .detailed-breakdown {
                max-height: none;
                overflow: visible;
            }
        }

        /* Update footer styles */
        footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--card-color);
            color: var(--text-color);
            padding: 0.375rem;
            font-size: var(--font-size-sm);
            text-align: center;
            border-top: 1px solid var(--border-color);
            z-index: 999;
        }

        footer p {
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
            line-height: 1;
        }

        footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0 0.25rem;
        }

        .footer-note {
            color: var(--text-color);
            opacity: 0.8;
            padding-left: 0.25rem;
        }

        /* Update theme toggle position to account for smaller footer */
        .theme-toggle {
            bottom: 0.75rem;
            right: 0.75rem;
            width: 2.25rem;
            height: 2.25rem;
            border-radius: 50%;
            background-color: var(--card-color);
            border: 2px solid var(--border-color);
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-lg);
        }

        .theme-toggle i {
            font-size: var(--font-size-base);
            color: var(--primary-color);
        }

        /* Add smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Update error styles */
        .error {
            color: var(--error-color);
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        /* Add input styling for number inputs */
        input[type="number"] {
            -moz-appearance: textfield;
        }
        
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        input[type="number"].error {
            border-color: var(--error-color);
            background-color: rgba(239, 68, 68, 0.05);
        }

        /* Update the guardrails-inputs CSS */
        .guardrails-inputs {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            gap: 1rem;
            padding: 0.5rem;
            margin: 0 1rem;
        }

        .guardrails-inputs .input-group {
            flex: 1;
            margin-bottom: 0;
            min-width: 200px;
        }

        .guardrails-inputs .input-group input {
            width: 100%;
            margin: 0.5rem 0;
        }

        @media (max-width: 768px) {
            .guardrails-inputs {
                flex-direction: column;
                gap: 1.5rem;
                padding: 1rem;
            }
            
            .guardrails-inputs .input-group {
                width: 100%;
            }
        }

        /* Add these CSS styles */
        .text-model-inputs {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 0.5rem;
            margin: 0 1rem;
        }

        .dropdown-row,
        .input-row {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            gap: 1rem;
        }

        .dropdown-row .input-group,
        .input-row .input-group {
            flex: 1;
            min-width: 200px;
        }

        .dropdown-row select,
        .input-row input[type="number"] {
            width: 100%;
            margin: 0.25rem 0;
        }

        @media (max-width: 768px) {
            .dropdown-row,
            .input-row {
                flex-direction: column;
                gap: 1rem;
            }
            
            .dropdown-row .input-group,
            .input-row .input-group {
                width: 100%;
            }
        }

        /* Add a container for the results and details */
        .results-details-container {
            display: flex;
            gap: 1rem;
            flex: 1;
            min-height: 0;
            margin-top: 0;
        }

        .detailed-step {
            background: var(--background-color);
            border-radius: 0.375rem;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            border: 1px solid var(--border-color);
        }

        .detailed-step:last-child {
            margin-bottom: 0;
        }

        .detailed-step h3 {
            color: var(--primary-color);
            font-size: var(--font-size-sm);
            font-weight: 600;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .detailed-step p {
            font-size: var(--font-size-sm);
            line-height: 1.3;
            margin: 0.125rem 0;
            color: var(--text-color);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.375rem;
            border-bottom: 1px solid var(--border-color);
            font-size: var(--font-size-sm);
            margin-bottom: 0.25rem;
        }

        @media (max-width: 992px) {
            .results-details-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .results-container,
            .detailed-breakdown {
                flex: 1;
                max-height: none;
            }
        }

        @media (max-width: 768px) {
            .tab-content {
                padding: 0.75rem;
            }
            
            .detailed-step {
                padding: 0.375rem;
            }
            
            .detailed-step h3 {
                font-size: var(--font-size-sm);
                margin-bottom: 0.125rem;
            }
            
            .detailed-step p {
                font-size: var(--font-size-sm);
                line-height: 1.2;
                margin: 0.125rem 0;
            }
        }

        /* Update the button group position */
        .button-group {
        }

        @media (max-width: 768px) {
            .detailed-step {
                padding: 0.75rem;
            }
            
            .detailed-step h3 {
                font-size: 0.875rem;
            }
            
            .detailed-step p {
                font-size: 0.8125rem;
            }
        }

        /* Update the button group position */
        .button-group {
            clear: both;
            margin-top: 1rem;
        }

        /* Update text model and embedding model inputs container */
        .text-model-inputs,
        .embedding-inputs {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 0.5rem;
            margin: 0 1rem;
        }

        /* Update dropdown and input rows */
        .dropdown-row,
        .input-row {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }

        .dropdown-row .input-group,
        .input-row .input-group {
            flex: 1;
            min-width: 200px;
            margin-bottom: 0.5rem;
        }

        /* Update embedding model specific styles */
        #embedding-tab .input-group {
            margin-bottom: 0.5rem;
        }

        #embedding-tab .input-group label {
            margin-bottom: 0.25rem;
        }

        #embedding-tab .input-group input,
        #embedding-tab .input-group select {
            margin: 0.25rem 0;
        }

        /* Update text model specific styles */
        #text-model-tab .input-group {
            margin-bottom: 0.5rem;
        }

        #text-model-tab .input-group label {
            margin-bottom: 0.25rem;
        }

        #text-model-tab .input-group input,
        #text-model-tab .input-group select {
            margin: 0.25rem 0;
        }

        /* Update responsive styles for both sections */
        @media (max-width: 992px) {
            .text-model-inputs,
            .embedding-inputs {
                padding: 0.375rem;
                margin: 0 0.75rem;
            }

            .dropdown-row,
            .input-row {
                gap: 0.75rem;
                margin-bottom: 0.375rem;
            }
        }

        @media (max-width: 768px) {
            .text-model-inputs,
            .embedding-inputs {
                padding: 0.25rem;
                margin: 0 0.5rem;
            }

            .dropdown-row,
            .input-row {
                flex-direction: column;
                gap: 0.5rem;
                margin-bottom: 0.25rem;
            }

            .dropdown-row .input-group,
            .input-row .input-group {
                width: 100%;
                margin-bottom: 0.25rem;
            }
        }

        @media (max-width: 480px) {
            .text-model-inputs,
            .embedding-inputs {
                padding: 0.125rem;
                margin: 0 0.25rem;
            }

            .dropdown-row,
            .input-row {
                gap: 0.25rem;
            }
        }

        /* Update embedding model styles */
        .embedding-inputs {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 0.5rem;
            margin: 0 1rem;
        }

        .embedding-row {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }

        .embedding-row .input-group {
            flex: 1;
            min-width: 200px;
            margin-bottom: 0.5rem;
        }

        /* Responsive styles for embedding section */
        @media (max-width: 992px) {
            .embedding-row {
                gap: 0.75rem;
            }
        }

        @media (max-width: 768px) {
            .embedding-row {
                flex-direction: column;
                gap: 0.5rem;
            }

            .embedding-row .input-group {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .embedding-inputs {
                padding: 0.25rem;
                margin: 0 0.5rem;
            }

            .embedding-row {
                gap: 0.25rem;
            }
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <div class="tab-buttons">
            <div class="tab-button active" onclick="switchTab('text-model')">
                <i class="fas fa-calculator"></i>
                <span>Text Model Calculator</span>
            </div>
            <div class="tab-button" onclick="switchTab('embedding')">
                <i class="fas fa-code"></i>
                <span>Embedding Model Calculator</span>
            </div>
            <div class="tab-button" onclick="switchTab('guardrails')">
                <i class="fas fa-shield-alt"></i>
                <span>Guardrails Calculator</span>
            </div>
        </div>
        

        <!-- Text Model Cost Calculator -->
        <div id="text-model-tab" class="tab-content active">
            <h1 class="calculator-title">
                <i class="fas fa-calculator"></i>
                Text Based LLM Model On-Demand Cost Calculator
            </h1>

            <div class="inputs-container text-model-inputs">
                <!-- First row: Dropdowns -->
                <div class="dropdown-row">
                    <div class="input-group">
                        <label>
                            <i class="fas fa-globe"></i>
                            Region
                        </label>
                        <select id="regionSelect" onchange="updateProviders()">
                            <option value="">Select Region</option>
                        </select>
                        <div class="error">Please select a region</div>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-server"></i>
                            Provider
                        </label>
                        <select id="providerSelect" onchange="updateModels()" disabled>
                            <option value="">Select Provider</option>
                        </select>
                        <div class="error">Please select a provider</div>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-cube"></i>
                            Model
                        </label>
                        <select id="modelSelect" onchange="updatePricing()" disabled>
                            <option value="">Select Model</option>
                        </select>
                        <div class="error">Please select a model</div>
                    </div>
                </div>

                <!-- Second row: Input boxes -->
                <div class="input-row">
                    <input type="hidden" id="inputTokenPrice">
                    <input type="hidden" id="outputTokenPrice">

                    <div class="input-group">
                        <label>
                            <i class="fas fa-keyboard"></i>
                            Input Tokens
                        </label>
                        <input type="number" 
                               id="textInputTokens" 
                               placeholder="Enter input tokens" 
                               min="1" 
                               step="1"
                               oninput="validateIntegerInput(this)"
                               onkeypress="return event.charCode >= 48 && event.charCode <= 57">
                        <div class="error" id="textInputTokensError"></div>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-keyboard"></i>
                            Output Tokens
                        </label>
                        <input type="number" 
                               id="textOutputTokens" 
                               placeholder="Enter output tokens" 
                               min="1" 
                               step="1"
                               oninput="validateIntegerInput(this)"
                               onkeypress="return event.charCode >= 48 && event.charCode <= 57">
                        <div class="error" id="textOutputTokensError"></div>
                    </div>

                    <div class="input-group">
                        <label>
                            <i class="fas fa-sync"></i>
                            Requests per Month
                        </label>
                        <input type="number" 
                               id="requestsPerMonth" 
                               placeholder="Enter requests per month" 
                               min="1" 
                               step="1"
                               oninput="validateIntegerInput(this)"
                               onkeypress="return event.charCode >= 48 && event.charCode <= 57">
                        <div class="error" id="requestsPerMonthError"></div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-calculate" onclick="calculateTextModelCost()">
                    <i class="fas fa-calculator"></i>
                    Calculate Cost
                </button>
                <button class="btn btn-reset" onclick="resetTextModelCalculator()">
                    <i class="fas fa-redo"></i>
                    Reset
                </button>
            </div>

            <div class="results-details-container">
                <div id="text-model-result" class="results-container"></div>
                <div id="text-model-result-details" class="detailed-breakdown"></div>
            </div>
        </div>

        <!-- Embedding Model Cost Calculator -->
        <div id="embedding-tab" class="tab-content">
            <h1 class="calculator-title">Embedding Based LLM Model On-Demand Cost Calculator</h1>

            <div class="inputs-container embedding-inputs">
                <div class="embedding-row">
                    <div class="input-group">
                        <label>Select Embedding Model</label>
                        <select id="modelType">
                            <option value="amzonEv1">Amazon Titan Text Embedding v1</option>
                            <option value="amzonEv2">Amazon Titan Text Embedding v2</option>
                            <option value="CoherePlain">Cohere Embed English</option>
                            <option value="CohereMultiLingual">Cohere Embed Multilingual</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Select Input Type</label>
                        <select id="embedType">
                            <option value="gb">Total Data Size in GB</option>
                            <option value="millionTokens">Total Number of Tokens in Million</option>
                            <option value="tokens">Total Number of Tokens</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Enter Value</label>
                        <input type="text" id="embedInputValue" placeholder="Enter value based on selection" oninput="validateInput(this)">
                        <div class="error" id="embedInputValueError"></div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-calculate" onclick="calculateEmbeddingCost()">Calculate Embedding Model Cost</button>
                <button class="btn btn-reset" onclick="resetEmbeddingCalculator()">Reset</button>
            </div>

            <div class="results-details-container">
                <div id="embedding-result" class="results-container"></div>
                <div id="embedding-result-details" class="detailed-breakdown"></div>
            </div>
        </div>

        <!-- Guardrails Cost Calculator -->
        <div id="guardrails-tab" class="tab-content">
            <h1 class="calculator-title">Amazon Bedrock Guardrails On-Demand Cost Calculator</h1>
            
            <div class="inputs-container guardrails-inputs">
                <div class="input-group">
                    <label for="inputTokens">Input Tokens Per Request</label>
                    <input type="number" id="inputTokens" placeholder="Enter input tokens" min="1">
                    <div class="error">Please enter a positive integer</div>
                </div>

                <div class="input-group">
                    <label for="outputTokens">Output Tokens Per Request</label>
                    <input type="number" id="outputTokens" placeholder="Enter output tokens" min="1">
                    <div class="error">Please enter a positive integer</div>
                </div>

                <div class="input-group">
                    <label for="requests">Total Number of Requests Per Month</label>
                    <input type="number" id="requests" placeholder="Enter requests per hour" min="1">
                    <div class="error">Please enter a positive integer</div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-calculate" onclick="calculateGuardrailsCost()">Calculate Cost</button>
                <button class="btn btn-reset" onclick="resetGuardrailsCalculator()">Reset</button>
            </div>

            <div class="results-details-container">
                <div id="guardrails-results" class="results-container"></div>
                <div id="guardrails-detailed-breakdown" class="detailed-breakdown"></div>
            </div>
        </div>

    </div>

    <!-- Update footer HTML -->
    <footer>
        <p>
            Developed by 
            <a href="https://www.cloudthat.com/resources/author/aditya-kumar/" target="_blank" rel="noopener noreferrer">
                Aditya Kumar
            </a>
            <span class="footer-note">â€¢ Please verify cost estimates prior to implementation</span>
        </p>
    </footer>

    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark mode">
        <i class="fas fa-moon"></i>
    </button>

    <script>
        // Tab Switching Function
        function switchTab(tabName) {
            // Remove active class from all tabs and tab buttons
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Add active class to selected tab and tab button
            document.getElementById(tabName + '-tab').classList.add('active');
            document.querySelector(`.tab-button[onclick="switchTab('${tabName}')"]`).classList.add('active');

            // Don't clear results when switching tabs
            // Only clear results when explicitly resetting or refreshing the page
        }

        // Function to clear all results - now only used on page load
        function clearResults() {
            const resultElements = [
                'text-model-result',
                'text-model-result-details',
                'embedding-result',
                'embedding-result-details',
                'guardrails-results',
                'guardrails-detailed-breakdown'
            ];
            
            resultElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.innerHTML = '';
                }
            });
        }

        // Initialize dropdowns and clear results only on page load
        window.onload = function() {
            initializeDropdowns();
            clearResults(); // Clear results only on initial page load
        };

        // Update the calculation functions to handle results display
        function updateResults(containerId, content) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = content;
                // Ensure smooth scrolling to the results
                container.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Updated validation function for positive integers
        function validateIntegerInput(input) {
            const errorElement = document.getElementById(input.id + 'Error');
            const value = input.value;
            
            // Remove any non-numeric characters
            input.value = value.replace(/[^0-9]/g, '');
            
            // Check if the value is empty or not a positive integer
            if (input.value === '' || parseInt(input.value) <= 0) {
                errorElement.textContent = "Please enter a positive integer";
                input.classList.add('error');
                return false;
            }
            
            // Check if the value is too large (optional, adjust max value as needed)
            if (parseInt(input.value) > 1000000000) {
                errorElement.textContent = "Value is too large. Please enter a smaller number";
                input.classList.add('error');
                return false;
            }
            
            errorElement.textContent = "";
            input.classList.remove('error');
            return true;
        }
        

        // Rest of the JavaScript remains the same as in the previous implementation
        // (Guardrails, Text Model, and Embedding Cost Calculator functions)
        // Copy the rest of the script from the previous implementation
        // Existing functions like calculateGuardrailsCost(), resetGuardrailsCalculator(), etc.
        
        // Pricing data object and other existing functions
        const pricingData = {
            "Regions": {
                "US East 1 (N. Virginia)": {
                "Providers": {
                    "AI21 Labs": {
                    "Models": {
                        "Jamba 1.5 Large": {
                        "Cost per 1000 input tokens": "$0.002",
                        "Cost per 1000 output tokens": "$0.008"
                        },
                        "Jamba 1.5 Mini": {
                        "Cost per 1000 input tokens": "$0.0002",
                        "Cost per 1000 output tokens": "$0.0004"
                        },
                        "Jurassic-2 Mid": {
                        "Cost per 1000 input tokens": "$0.0125",
                        "Cost per 1000 output tokens": "$0.0125"
                        },
                        "Jurassic-2 Ultra": {
                        "Cost per 1000 input tokens": "$0.0188",
                        "Cost per 1000 output tokens": "$0.0188"
                        },
                        "Jamba-Instruct": {
                        "Cost per 1000 input tokens": "$0.0005",
                        "Cost per 1000 output tokens": "$0.0007"
                        }
                    }
                    },
                    "Amazon Titan": {
                    "Models": {
                        "Titan Text G1 -Lite": {
                        "Cost per 1000 input tokens": "$0.00015",
                        "Cost per 1000 output tokens": "$0.0002"
                        },
                        "Titan Text G1 -Express": {
                        "Cost per 1000 input tokens": "$0.0002",
                        "Cost per 1000 output tokens": "$0.0006"
                        },
                        "Titan Text G1 -Premier": {
                        "Cost per 1000 input tokens": "$0.0005",
                        "Cost per 1000 output tokens": "$0.0015"
                        }
                    }
                    },
                    "Amazon Nova": {
                    "Models": {
                        "Amazon Nova Micro": {
                            "Cost per 1000 input tokens": "$0.000035",
                            "Cost per 1000 output tokens": "$0.00014"
                        },
                        "Amazon Nova Lite": {
                            "Cost per 1000 input tokens": "$0.00006",
                            "Cost per 1000 output tokens": "$0.00024"
                        },
                        "Amazon Nova Pro": {
                            "Cost per 1000 input tokens": "$0.0008",
                            "Cost per 1000 output tokens": "$0.0032"
                        },
                        "Amazon Nova Pro (Latency Optimized)": {
                            "Cost per 1000 input tokens": "$0.001",
                            "Cost per 1000 output tokens": "$0.004"
                        },
                        "Amazon Nova Premier": {
                            "Cost per 1000 input tokens": "$0.0025",
                            "Cost per 1000 output tokens": "$0.0125"
                        }
                    }
                    },
                    "Anthropic": {
                    "Models": {
                        "Claude Opus 4": {
                            "Cost per 1000 input tokens": "$0.015",
                            "Cost per 1000 output tokens": "$0.075"
                        },
                        "Claude Sonnet 4": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3.7 Sonnet": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3.5 v1/v2 Sonnet": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3.5 Haiku": {
                            "Cost per 1000 input tokens": "$0.0008",
                            "Cost per 1000 output tokens": "$0.004"
                        },
                        "Claude 3 Opus": {
                        "Cost per 1000 input tokens": "$0.015",
                        "Cost per 1000 output tokens": "$0.075"
                        },
                        "Claude 3 Sonnet": {
                        "Cost per 1000 input tokens": "$0.003",
                        "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3 Haiku": {
                        "Cost per 1000 input tokens": "$0.00025",
                        "Cost per 1000 output tokens": "$0.00125"
                        },
                        "Claude 2.1": {
                        "Cost per 1000 input tokens": "$0.008",
                        "Cost per 1000 output tokens": "$0.024"
                        },
                        "Claude 2.0": {
                        "Cost per 1000 input tokens": "$0.008",
                        "Cost per 1000 output tokens": "$0.024"
                        },
                        "Claude Instant": {
                        "Cost per 1000 input tokens": "$0.0008",
                        "Cost per 1000 output tokens": "$0.0024"
                        }
                    }
                    },
                    "DeepSeek": {
                    "Models": {
                        "DeepSeek R-1": {
                            "Cost per 1000 input tokens": "$0.00135",
                            "Cost per 1000 output tokens": "$0.0054"
                        }
                    }
                    },
                    "Cohere": {
                    "Models": {
                        "Command": {
                        "Cost per 1000 input tokens": "$0.0015",
                        "Cost per 1000 output tokens": "$0.0020"
                        },
                        "Command-Light": {
                        "Cost per 1000 input tokens": "$0.0003",
                        "Cost per 1000 output tokens": "$0.0006"
                        },
                        "Command R+": {
                        "Cost per 1000 input tokens": "$0.0030",
                        "Cost per 1000 output tokens": "$0.0150"
                        },
                        "Command R": {
                        "Cost per 1000 input tokens": "$0.0005",
                        "Cost per 1000 output tokens": "$0.0015"
                        }
                    }
                    },
                    "Meta Llama 4": {
                    "Models": {
                        "Llama 4 Maverick 17B": {
                        "Cost per 1000 input tokens": "$0.00024",
                        "Cost per 1000 output tokens": "$0.00097"
                        },
                        "Llama 4 Scout 17B": {
                        "Cost per 1000 input tokens": "$0.00017",
                        "Cost per 1000 output tokens": "$0.00066"
                        }
                    }
                    },
                    "Meta Llama 3.3": {
                    "Models": {
                        "Llama 3.3 Instruct (70B)": {
                        "Cost per 1000 input tokens": "$0.00072",
                        "Cost per 1000 output tokens": "$0.00072"
                        }
                    }
                    },
                    "Meta Llama 3.2": {
                    "Models": {
                        "Llama 3.2 Instruct (1B)": {
                        "Cost per 1000 input tokens": "$0.0001",
                        "Cost per 1000 output tokens": "$0.0001"
                        },
                        "Llama 3.2 Instruct (3B)": {
                        "Cost per 1000 input tokens": "$0.00015",
                        "Cost per 1000 output tokens": "$0.00015"
                        },
                        "Llama 3.2 Instruct (11B)": {
                        "Cost per 1000 input tokens": "$0.00035",
                        "Cost per 1000 output tokens": "$0.00035"
                        },
                        "Llama 3.2 Instruct (90B)": {
                        "Cost per 1000 input tokens": "$0.002",
                        "Cost per 1000 output tokens": "$0.002"
                        }
                    }
                    },
                    "Meta Llama 3": {
                    "Models": {
                        "Llama 3 Instruct (8B)": {
                        "Cost per 1000 input tokens": "$0.0003",
                        "Cost per 1000 output tokens": "$0.0006"
                        },
                        "Llama 3 Instruct (70B)": {
                        "Cost per 1000 input tokens": "$0.00265",
                        "Cost per 1000 output tokens": "$0.0035"
                        }
                    }
                    },
                    "Meta Llama 2": {
                    "Models": {
                        "Llama 2 Chat (13B)": {
                        "Cost per 1000 input tokens": "$0.00075",
                        "Cost per 1000 output tokens": "$0.001"
                        },
                        "Llama 2 Chat (70B)": {
                        "Cost per 1000 input tokens": "$0.00195",
                        "Cost per 1000 output tokens": "$0.00256"
                        }
                    }
                    },
                    "Mistral AI": {
                    "Models": {
                        "Mistral 7B": {
                        "Cost per 1000 input tokens": "$0.00015",
                        "Cost per 1000 output tokens": "$0.0002"
                        },
                        "Mixtral 8*7B": {
                        "Cost per 1000 input tokens": "$0.00045",
                        "Cost per 1000 output tokens": "$0.0007"
                        },
                        "Mistral Small (24.02)": {
                        "Cost per 1000 input tokens": "$0.001",
                        "Cost per 1000 output tokens": "$0.003"
                        },
                        "Mistral Large (24.07)": {
                        "Cost per 1000 input tokens": "$0.004",
                        "Cost per 1000 output tokens": "$0.012"
                        },
                        "Pixtral Large (25.02)": {
                        "Cost per 1000 input tokens": "$0.002",
                        "Cost per 1000 output tokens": "$0.006"
                        }
                    }
                    }
                }
                },
                "US West 2 (Oregon)": {
                "Providers": {
                    "Amazon Titan": {
                    "Models": {
                        "Titan Text G1 -Lite": {
                        "Cost per 1000 input tokens": "$0.00015",
                        "Cost per 1000 output tokens": "$0.0002"
                        },
                        "Titan Text G1 -Express": {
                        "Cost per 1000 input tokens": "$0.0002",
                        "Cost per 1000 output tokens": "$0.0006"
                        }
                    }
                    },
                    "Amazon Nova": {
                    "Models": {
                        "Amazon Nova Micro": {
                            "Cost per 1000 input tokens": "$0.000035",
                            "Cost per 1000 output tokens": "$0.00014"
                        },
                        "Amazon Nova Lite": {
                            "Cost per 1000 input tokens": "$0.00006",
                            "Cost per 1000 output tokens": "$0.00024"
                        },
                        "Amazon Nova Pro": {
                            "Cost per 1000 input tokens": "$0.0008",
                            "Cost per 1000 output tokens": "$0.0032"
                        },
                        "Amazon Nova Pro (Latency Optimized)": {
                            "Cost per 1000 input tokens": "$0.001",
                            "Cost per 1000 output tokens": "$0.004"
                        },
                        "Amazon Nova Premier": {
                            "Cost per 1000 input tokens": "$0.0025",
                            "Cost per 1000 output tokens": "$0.0125"
                        }
                    }
                    },
                    "Anthropic": {
                    "Models": {
                        "Claude Opus 4": {
                            "Cost per 1000 input tokens": "$0.015",
                            "Cost per 1000 output tokens": "$0.075"
                        },
                        "Claude Sonnet 4": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3.7 Sonnet": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3.5 v1/v2 Sonnet": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3.5 Haiku": {
                            "Cost per 1000 input tokens": "$0.0008",
                            "Cost per 1000 output tokens": "$0.004"
                        },
                        "Claude 3 Opus": {
                        "Cost per 1000 input tokens": "$0.015",
                        "Cost per 1000 output tokens": "$0.075"
                        },
                        "Claude 3 Sonnet": {
                        "Cost per 1000 input tokens": "$0.003",
                        "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3 Haiku": {
                        "Cost per 1000 input tokens": "$0.00025",
                        "Cost per 1000 output tokens": "$0.00125"
                        },
                        "Claude 2.1": {
                        "Cost per 1000 input tokens": "$0.008",
                        "Cost per 1000 output tokens": "$0.024"
                        },
                        "Claude 2.0": {
                        "Cost per 1000 input tokens": "$0.008",
                        "Cost per 1000 output tokens": "$0.024"
                        },
                        "Claude Instant": {
                        "Cost per 1000 input tokens": "$0.0008",
                        "Cost per 1000 output tokens": "$0.0024"
                        }
                    }
                    },
                    "Cohere": {
                    "Models": {
                        "Command": {
                        "Cost per 1000 input tokens": "$0.0015",
                        "Cost per 1000 output tokens": "$0.0020"
                        },
                        "Command-Light": {
                        "Cost per 1000 input tokens": "$0.0003",
                        "Cost per 1000 output tokens": "$0.0006"
                        },
                        "Command R+": {
                        "Cost per 1000 input tokens": "$0.0030",
                        "Cost per 1000 output tokens": "$0.0150"
                        },
                        "Command R": {
                        "Cost per 1000 input tokens": "$0.0005",
                        "Cost per 1000 output tokens": "$0.0015"
                        }
                    }
                    },
                    "Meta Llama 4": {
                    "Models": {
                        "Llama 4 Maverick 17B": {
                        "Cost per 1000 input tokens": "$0.00024",
                        "Cost per 1000 output tokens": "$0.00097"
                        },
                        "Llama 4 Scout 17B": {
                        "Cost per 1000 input tokens": "$0.00017",
                        "Cost per 1000 output tokens": "$0.00066"
                        }
                    }
                    },
                    "Meta Llama 3.3": {
                    "Models": {
                        "Llama 3.3 Instruct (70B)": {
                            "Cost per 1000 input tokens": "$0.00072",
                            "Cost per 1000 output tokens": "$0.00072"
                        }
                    }
                    },
                    "Meta Llama 3.2": {
                    "Models": {
                        "Llama 3.2 Instruct (1B)": {
                        "Cost per 1000 input tokens": "$0.0001",
                        "Cost per 1000 output tokens": "$0.0001"
                        },
                        "Llama 3.2 Instruct (3B)": {
                        "Cost per 1000 input tokens": "$0.00015",
                        "Cost per 1000 output tokens": "$0.00015"
                        },
                        "Llama 3.2 Instruct (11B)": {
                        "Cost per 1000 input tokens": "$0.00035",
                        "Cost per 1000 output tokens": "$0.00035"
                        },
                        "Llama 3.2 Instruct (90B)": {
                        "Cost per 1000 input tokens": "$0.002",
                        "Cost per 1000 output tokens": "$0.002"
                        }
                    }
                    },
                    "Meta Llama 3.1": {
                    "Models": {
                        "Llama 3.1 Instruct (8B)": {
                        "Cost per 1000 input tokens": "$0.00022",
                        "Cost per 1000 output tokens": "$0.00022"
                        },
                        "Llama 3.1 Instruct (70B)": {
                        "Cost per 1000 input tokens": "$0.00099",
                        "Cost per 1000 output tokens": "$0.00099"
                        },
                        "Llama 3.1 Instruct (405B)": {
                        "Cost per 1000 input tokens": "$0.00532",
                        "Cost per 1000 output tokens": "$0.016"
                        }
                    }
                    },
                    "Meta Llama 3": {
                    "Models": {
                        "Llama 3 Instruct (8B)": {
                        "Cost per 1000 input tokens": "$0.0003",
                        "Cost per 1000 output tokens": "$0.0006"
                        },
                        "Llama 3 Instruct (70B)": {
                        "Cost per 1000 input tokens": "$0.00265",
                        "Cost per 1000 output tokens": "$0.0035"
                        }
                    }
                    },
                    "Meta Llama 2": {
                    "Models": {
                        "Llama 2 Chat (13B)": {
                        "Cost per 1000 input tokens": "$0.00075",
                        "Cost per 1000 output tokens": "$0.001"
                        },
                        "Llama 2 Chat (70B)": {
                        "Cost per 1000 input tokens": "$0.00195",
                        "Cost per 1000 output tokens": "$0.00256"
                        }
                    }
                    },
                    "Writer": {
                    "Models": {
                        "Palmyra X4": {
                            "Cost per 1000 input tokens": "$0.0025",
                            "Cost per 1000 output tokens": "$0.010"
                        },
                         "Palmyra X5": {
                            "Cost per 1000 input tokens": "$0.0006",
                            "Cost per 1000 output tokens": "$0.006"
                        }
                    }
                    },
                    "Mistral AI": {
                    "Models": {
                        "Mistral 7B": {
                        "Cost per 1000 input tokens": "$0.00015",
                        "Cost per 1000 output tokens": "$0.0002"
                        },
                        "Mixtral 8*7B": {
                        "Cost per 1000 input tokens": "$0.00045",
                        "Cost per 1000 output tokens": "$0.0007"
                        },
                        "Mistral Large (24.02)": {
                        "Cost per 1000 input tokens": "$0.0052",
                        "Cost per 1000 output tokens": "$0.0156"
                        },
                        "Mistral Large 2 (24.07)": {
                        "Cost per 1000 input tokens": "$0.002",
                        "Cost per 1000 output tokens": "$0.006"
                        },
                        "Pixtral Large (25.02)": {
                        "Cost per 1000 input tokens": "$0.002",
                        "Cost per 1000 output tokens": "$0.006"
                        }
                    }
                    }

                }
                },
                "Asia Pacific (Mumbai)": {
                "Providers": {
                    "Amazon Titan": {
                    "Models": {
                        "Titan Text G1 -Lite": {
                        "Cost per 1000 input tokens": "$0.0004",
                        "Cost per 1000 output tokens": "$0.0005"
                        },
                        "Titan Text G1 -Express": {
                        "Cost per 1000 input tokens": "$0.001",
                        "Cost per 1000 output tokens": "$0.0019"
                        }
                    }
                    },
                    "Amazon Nova": {
                    "Models": {
                        "Amazon Nova Micro": {
                            "Cost per 1000 input tokens": "$0.000041",
                            "Cost per 1000 output tokens": "$0.000164"
                        },
                        "Amazon Nova Lite": {
                            "Cost per 1000 input tokens": "$0.000071",
                            "Cost per 1000 output tokens": "$0.000284"
                        },
                        "Amazon Nova Pro": {
                            "Cost per 1000 input tokens": "$0.00094",
                            "Cost per 1000 output tokens": "$0.00376"
                        }
                    }
                    },
                    "Anthropic": {
                    "Models": {
                        "Claude Sonnet 4": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3.7 Sonnet": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3.5 v1/v2 Sonnet": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3 Sonnet": {
                        "Cost per 1000 input tokens": "$0.003",
                        "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3 Haiku": {
                        "Cost per 1000 input tokens": "$0.00025",
                        "Cost per 1000 output tokens": "$0.00125"
                        }
                    }
                    },
                    "Meta Llama 3": {
                    "Models": {
                        "Llama 3 Instruct (8B)": {
                        "Cost per 1000 input tokens": "$0.00036",
                        "Cost per 1000 output tokens": "$0.00072"
                        },
                        "Llama 3 Instruct (70B)": {
                        "Cost per 1000 input tokens": "$0.00318",
                        "Cost per 1000 output tokens": "$0.0042"
                        }
                    }
                    },
                    "Mistral AI": {
                    "Models": {
                        "Mistral 7B": {
                        "Cost per 1000 input tokens": "$0.00018",
                        "Cost per 1000 output tokens": "$0.00024"
                        },
                        "Mixtral 8*7B": {
                        "Cost per 1000 input tokens": "$0.00054",
                        "Cost per 1000 output tokens": "$0.00084"
                        },
                        "Mistral Large (24.07)": {
                        "Cost per 1000 input tokens": "$0.0048",
                        "Cost per 1000 output tokens": "$0.0144"
                        }
                    }
                    }
                }
                },
                "Europe (London)": {
                "Amazon": {
                        "Models": {
                        "Titan Text G1 -Lite": {
                            "Cost per 1000 input tokens": "$0.0002",
                            "Cost per 1000 output tokens": "$0.0003"
                        },
                        "Titan Text G1 -Express": {
                            "Cost per 1000 input tokens": "$0.0003",
                            "Cost per 1000 output tokens": "$0.0009"
                        }
                        }
                    },
                    "Anthropic": {
                    "Claude 3 Sonnet": {
                    "Cost per 1000 input tokens": "$0.003",
                    "Cost per 1000 output tokens": "$0.015"
                    },
                    "Claude 3 Haiku": {
                    "Cost per 1000 input tokens": "$0.00025",
                    "Cost per 1000 output tokens": "$0.00125"
                    }
                },
                "Mistral": {
                    "Mistral 7B": {
                    "Cost per 1000 input tokens": "$0.0002",
                    "Cost per 1000 output tokens": "$0.00026"
                    },
                    "Mixtral 8*7B": {
                    "Cost per 1000 input tokens": "$0.00059",
                    "Cost per 1000 output tokens": "$0.00091"
                    },
                    "Mistral Large (24.02)": {
                    "Cost per 1000 input tokens": "$0.0052",
                    "Cost per 1000 output tokens": "$0.0156"
                    }
                },
                "Llama 3": {
                    "Llama 3 Instruct (8B)": {
                    "Cost per 1000 input tokens": "$0.00039",
                    "Cost per 1000 output tokens": "$0.00078"
                    },
                    "Llama 3 Instruct (70B)": {
                    "Cost per 1000 input tokens": "$0.00345",
                    "Cost per 1000 output tokens": "$0.00455"
                    }
                }
                },
                "South America (Sao Paolo)": {
                "Amazon": {
                        "Models": {
                        "Titan Text G1 -Lite": {
                            "Cost per 1000 input tokens": "$0.0003",
                            "Cost per 1000 output tokens": "$0.0004"
                        },
                        "Titan Text G1 -Express": {
                            "Cost per 1000 input tokens": "$0.0004",
                            "Cost per 1000 output tokens": "$0.0011"
                        }
                        }
                    },
                    "Anthropic": {
                        "Claude 3 Sonnet": {
                        "Cost per 1000 input tokens": "$0.003",
                        "Cost per 1000 output tokens": "$0.015"
                        },
                        "Claude 3 Haiku": {
                        "Cost per 1000 input tokens": "$0.00025",
                        "Cost per 1000 output tokens": "$0.00125"
                        }
                },
                "Mistral": {
                    "Mistral 7B": {
                    "Cost per 1000 input tokens": "$0.00025",
                    "Cost per 1000 output tokens": "$0.00034"
                    },
                    "Mixtral 8*7B": {
                    "Cost per 1000 input tokens": "$0.00076",
                    "Cost per 1000 output tokens": "$0.00118"
                    },
                    "Mistral Large (24.02)": {
                    "Cost per 1000 input tokens": "$0.0067",
                    "Cost per 1000 output tokens": "$0.0202"
                    }
                },
                "Llama 3": {
                    "Llama 3 Instruct (8B)": {
                    "Cost per 1000 input tokens": "$0.0005",
                    "Cost per 1000 output tokens": "$0.00101"
                    },
                    "Llama 3 Instruct (70B)": {
                    "Cost per 1000 input tokens": "$0.00445",
                    "Cost per 1000 output tokens": "$0.00588"
                    }
                }
                },
                "Canada (Central)": {
                    "Amazon": {
                        "Models": {
                        "Titan Text G1 -Lite": {
                            "Cost per 1000 input tokens": "$0.0002",
                            "Cost per 1000 output tokens": "$0.0003"
                        },
                        "Titan Text G1 -Express": {
                            "Cost per 1000 input tokens": "$0.0003",
                            "Cost per 1000 output tokens": "$0.0008"
                        }
                        }
                    },
                    "Anthropic": {
                    "Claude 3 Sonnet": {
                    "Cost per 1000 input tokens": "$0.003",
                    "Cost per 1000 output tokens": "$0.015"
                    },
                    "Claude 3 Haiku": {
                    "Cost per 1000 input tokens": "$0.00025",
                    "Cost per 1000 output tokens": "$0.00125"
                    }
                },
                "Mistral": {
                    "Mistral 7B": {
                    "Cost per 1000 input tokens": "$0.00017",
                    "Cost per 1000 output tokens": "$0.00023"
                    },
                    "Mixtral 8*7B": {
                    "Cost per 1000 input tokens": "$0.00052",
                    "Cost per 1000 output tokens": "$0.00081"
                    },
                    "Mistral Large (24.02)": {
                    "Cost per 1000 input tokens": "$0.0046",
                    "Cost per 1000 output tokens": "$0.0138"
                    }
                },
                "Llama 3": {
                    "Llama 3 Instruct (8B)": {
                    "Cost per 1000 input tokens": "$0.00035",
                    "Cost per 1000 output tokens": "$0.00069"
                    },
                    "Llama 3 Instruct (70B)": {
                    "Cost per 1000 input tokens": "$0.00305",
                    "Cost per 1000 output tokens": "$0.00403"
                    }
                }

                },
                "Asia Pacific (Sydney)": {
                "Amazon": {
                        "Models": {
                        "Titan Text G1 -Lite": {
                            "Cost per 1000 input tokens": "$0.0002",
                            "Cost per 1000 output tokens": "$0.00025"
                        },
                        "Titan Text G1 -Express": {
                            "Cost per 1000 input tokens": "$0.00025",
                            "Cost per 1000 output tokens": "$0.000788"
                        }
                        }
                    },
                    "Anthropic": {
                    "Claude 3 Sonnet": {
                    "Cost per 1000 input tokens": "$0.003",
                    "Cost per 1000 output tokens": "$0.015"
                    },
                    "Claude 3 Haiku": {
                    "Cost per 1000 input tokens": "$0.00025",
                    "Cost per 1000 output tokens": "$0.00125"
                    }
                },
                "Mistral": {
                    "Mistral 7B": {
                    "Cost per 1000 input tokens": "$0.0002",
                    "Cost per 1000 output tokens": "$0.00026"
                    },
                    "Mixtral 8*7B": {
                    "Cost per 1000 input tokens": "$0.00059",
                    "Cost per 1000 output tokens": "$0.00091"
                    },
                    "Mistral Large (24.02)": {
                    "Cost per 1000 input tokens": "$0.0052",
                    "Cost per 1000 output tokens": "$0.0156"
                    }
                }
                },
                "Asia Pacific (Tokyo)": {
                    "Amazon": {
                        "Models": {
                        "Titan Text G1 -Lite": {
                            "Cost per 1000 input tokens": "$0.000275",
                            "Cost per 1000 output tokens": "$0.000825"
                        }
                        }
                    },
                    "Anthropic": {
                        "Claude Instant": {
                            "Cost per 1000 input tokens": "$0.0008",
                            "Cost per 1000 output tokens": "$0.0024"
                        },
                        "Claude 2.0/2.1": {
                            "Cost per 1000 input tokens": "$0.008",
                            "Cost per 1000 output tokens": "$0.024"
                        },
                        "Claude 3 Haiku": {
                            "Cost per 1000 input tokens": "$0.00025",
                            "Cost per 1000 output tokens": "$0.00125"
                        },
                        "Claude 3.5 Sonnet": {
                            "Cost per 1000 input tokens": "$0.003",
                            "Cost per 1000 output tokens": "$0.015"
                        }
                }
                },
                "Asia Pacific (Singapore)": {
                "Anthropic": {
                    "Claude Instant": {
                    "Cost per 1000 input tokens": "$0.0008",
                    "Cost per 1000 output tokens": "$0.0024"
                    },
                    "Claude 2.0/2.1": {
                    "Cost per 1000 input tokens": "$0.008",
                    "Cost per 1000 output tokens": "$0.024"
                    },
                    "Claude 3 Haiku": {
                    "Cost per 1000 input tokens": "$0.00025",
                    "Cost per 1000 output tokens": "$0.00125"
                    },
                    "Claude 3.5 Sonnet": {
                    "Cost per 1000 input tokens": "$0.003",
                    "Cost per 1000 output tokens": "$0.015"
                    }
                }
                },
                "Europe (Paris)": {
                    "Amazon": {
                        "Models": {
                        "Titan Text G1 -Lite": {
                            "Cost per 1000 input tokens": "$0.0002",
                            "Cost per 1000 output tokens": "$0.00025"
                        },
                        "Titan Text G1 -Express": {
                            "Cost per 1000 input tokens": "$0.00025",
                            "Cost per 1000 output tokens": "$0.000788"
                        }
                        }
                    },
                    "Anthropic": {
                    "Claude 3 Sonnet": {
                    "Cost per 1000 input tokens": "$0.003",
                    "Cost per 1000 output tokens": "$0.015"
                    },
                    "Claude 3 Haiku": {
                    "Cost per 1000 input tokens": "$0.00025",
                    "Cost per 1000 output tokens": "$0.00125"
                    }
                },
                "Llama 3.2": {
                    "Llama 3.2 Instruct (1B)": {
                    "Cost per 1000 input tokens": "$0.00013",
                    "Cost per 1000 output tokens": "$0.00013"
                    },
                    "Llama 3.2 Instruct (3B)": {
                    "Cost per 1000 input tokens": "$0.0002",
                    "Cost per 1000 output tokens": "$0.0002"
                    }
                },
                "Mistral": {
                    "Mistral 7B": {
                    "Cost per 1000 input tokens": "$0.0002",
                    "Cost per 1000 output tokens": "$0.00026"
                    },
                    "Mixtral 8*7B": {
                    "Cost per 1000 input tokens": "$0.00059",
                    "Cost per 1000 output tokens": "$0.00091"
                    },
                    "Mistral Large (24.02)": {
                    "Cost per 1000 input tokens": "$0.0052",
                    "Cost per 1000 output tokens": "$0.0156"
                    }
                }
                },
                "Europe (Frankfurt)": {
                    "Amazon": {
                        "Models": {
                        "Titan Text G1 -Express": {
                            "Cost per 1000 input tokens": "$0.0003",
                            "Cost per 1000 output tokens": "$0.000863"
                        }
                        }
                    },
                    "Anthropic": {
                    "Claude Instant": {
                    "Cost per 1000 input tokens": "$0.0008",
                    "Cost per 1000 output tokens": "$0.0024"
                    },
                    "Claude 2.0/2.1": {
                    "Cost per 1000 input tokens": "$0.008",
                    "Cost per 1000 output tokens": "$0.024"
                    },
                    "Claude 3 Sonnet": {
                    "Cost per 1000 input tokens": "$0.003",
                    "Cost per 1000 output tokens": "$0.015"
                    },
                    "Claude 3.5 Sonnet": {
                    "Cost per 1000 input tokens": "$0.003",
                    "Cost per 1000 output tokens": "$0.015"
                    },
                    "Claude 3 Haiku": {
                    "Cost per 1000 input tokens": "$0.00025",
                    "Cost per 1000 output tokens": "$0.00125"
                    }
                },
                "Llama 3.2": {
                    "Llama 3.2 Instruct (1B)": {
                    "Cost per 1000 input tokens": "$0.00013",
                    "Cost per 1000 output tokens": "$0.00013"
                    },
                    "Llama 3.2 Instruct (3B)": {
                    "Cost per 1000 input tokens": "$0.00019",
                    "Cost per 1000 output tokens": "$0.00019"
                    }
                }
                }
            }
            };

        // Copy the existing initializeDropdowns, updateProviders, updateModels, updatePricing functions
        function initializeDropdowns() {
            const regionSelect = document.getElementById('regionSelect');
            regionSelect.innerHTML = '<option value="">Select Region</option>';
            Object.keys(pricingData.Regions).forEach(region => {
                const option = document.createElement('option');
                option.value = region;
                option.textContent = region;
                regionSelect.appendChild(option);
            });
        }

        function updateProviders() {
            const regionSelect = document.getElementById('regionSelect');
            const providerSelect = document.getElementById('providerSelect');
            const modelSelect = document.getElementById('modelSelect');
            
            providerSelect.innerHTML = '<option value="">Select Provider</option>';
            modelSelect.innerHTML = '<option value="">Select Model</option>';
            
            if (regionSelect.value) {
                const providers = Object.keys(pricingData.Regions[regionSelect.value].Providers);
                providers.forEach(provider => {
                    const option = document.createElement('option');
                    option.value = provider;
                    option.textContent = provider;
                    providerSelect.appendChild(option);
                });
                providerSelect.disabled = false;
                modelSelect.disabled = true;
            } else {
                providerSelect.disabled = true;
                modelSelect.disabled = true;
            }
        }

        function updateModels() {
            const regionSelect = document.getElementById('regionSelect');
            const providerSelect = document.getElementById('providerSelect');
            const modelSelect = document.getElementById('modelSelect');
            
            modelSelect.innerHTML = '<option value="">Select Model</option>';
            
            if (providerSelect.value) {
                const models = Object.keys(pricingData.Regions[regionSelect.value]
                    .Providers[providerSelect.value].Models);
                models.forEach(model => {
                    const option = document.createElement('option');
                    option.value = model;
                    option.textContent = model;
                    modelSelect.appendChild(option);
                });
                modelSelect.disabled = false;
            } else {
                modelSelect.disabled = true;
            }
        }

        function updatePricing() {
            const regionSelect = document.getElementById('regionSelect');
            const providerSelect = document.getElementById('providerSelect');
            const modelSelect = document.getElementById('modelSelect');

            if (modelSelect.value) {
                const modelPricing = pricingData.Regions[regionSelect.value]
                    .Providers[providerSelect.value]
                    .Models[modelSelect.value];

                document.getElementById('inputTokenPrice').value = 
                    parseFloat(modelPricing["Cost per 1000 input tokens"].replace('$', ''));
                document.getElementById('outputTokenPrice').value = 
                    parseFloat(modelPricing["Cost per 1000 output tokens"].replace('$', ''));
            }
        }

        // Remaining functions from the previous implementation
        // (calculateGuardrailsCost, resetGuardrailsCalculator, 
        //  calculateTextModelCost, resetTextModelCalculator,
        //  calculateEmbeddingCost, resetEmbeddingCalculator)

        function calculateGuardrailsCost() {
            let inputTokens = parseInt(document.getElementById("inputTokens").value);
            let outputTokens = parseInt(document.getElementById("outputTokens").value);
            let requests = parseInt(document.getElementById("requests").value);
            
            // Validation
            let hasError = false;
            const inputTokensEl = document.getElementById("inputTokens");
            const outputTokensEl = document.getElementById("outputTokens");
            const requestsEl = document.getElementById("requests");

            if (isNaN(inputTokens) || inputTokens < 1) {
                inputTokensEl.classList.add('error');
                inputTokensEl.nextElementSibling.textContent = "Please enter a positive integer";
                hasError = true;
            } else {
                inputTokensEl.classList.remove('error');
                inputTokensEl.nextElementSibling.textContent = "";
            }

            if (isNaN(outputTokens) || outputTokens < 1) {
                outputTokensEl.classList.add('error');
                outputTokensEl.nextElementSibling.textContent = "Please enter a positive integer";
                hasError = true;
            } else {
                outputTokensEl.classList.remove('error');
                outputTokensEl.nextElementSibling.textContent = "";
            }

            if (isNaN(requests) || requests < 1) {
                requestsEl.classList.add('error');
                requestsEl.nextElementSibling.textContent = "Please enter a positive integer";
                hasError = true;
            } else {
                requestsEl.classList.remove('error');
                requestsEl.nextElementSibling.textContent = "";
            }

            if (hasError) return;

            let inputCharacters = inputTokens * 3.5;
            let outputCharacters = outputTokens * 3.5;

            let inputUnits = Math.ceil(inputCharacters / 1000);
            let outputUnits = Math.ceil(outputCharacters / 1000);
            let totalUnitsPerRequest = inputUnits + outputUnits;
            let totalUnits = totalUnitsPerRequest * requests;

            let contentFilterCost = (totalUnits * 0.15) / 1000;
            let deniedTopicsCost = (totalUnits * 0.15) / 1000;
            let contextualGroundingCost = (totalUnits * 0.1) / 1000;
            let piiFilterCost = (totalUnits * 0.1) / 1000;
            let totalCost = contentFilterCost + deniedTopicsCost + contextualGroundingCost + piiFilterCost;

            document.getElementById("guardrails-results").innerHTML = `
                <button class="copy-button" onclick="copyResults('guardrails-results')" title="Copy results">
                    <i class="fas fa-copy"></i>
                </button>
                <div class="copy-success">Copied!</div>
                <div class="result-item">
                    <span>Content Filter Cost : </span>
                    <span>${contentFilterCost.toFixed(4)} USD</span>
                </div>
                <div class="result-item">
                    <span>Denied Topics Cost : </span>
                    <span>${deniedTopicsCost.toFixed(4)} USD</span>
                </div>
                <div class="result-item">
                    <span>Contextual Grounding Cost : </span>
                    <span>${contextualGroundingCost.toFixed(4)} USD</span>
                </div>
                <div class="result-item">
                    <span>PII Filter Cost : </span>
                    <span>${piiFilterCost.toFixed(4)} USD</span>
                </div>
                <div class="result-item">
                    <span>Regex Filter Cost : </span>
                    <span>Free</span>
                </div>
                <div class="result-item">
                    <span>Word Filter Cost : </span>
                    <span>Free</span>
                </div>
                <div class="result-item">
                    <span>Total Cost : </span>
                    <span>${totalCost.toFixed(4)} USD</span>
                </div>
            `;

            document.getElementById("guardrails-detailed-breakdown").innerHTML = `
                <button class="copy-button" onclick="copyResults('guardrails-detailed-breakdown')" title="Copy details">
                    <i class="fas fa-copy"></i>
                </button>
                <div class="copy-success">Copied!</div>
                <div class="detailed-step">
                    <h3>Token to Character Conversion</h3>
                    <p>Input: ${inputTokens} tokens Ã— 3.5 = ${inputCharacters.toFixed(4)} characters</p>
                    <p>Output: ${outputTokens} tokens Ã— 3.5 = ${outputCharacters.toFixed(4)} characters</p>
                </div>

                <div class="detailed-step">
                    <h3>Units Calculation</h3>
                    <p>Input Units: ${inputCharacters.toFixed(4)} Ã· 1000 = ${inputUnits} units</p>
                    <p>Output Units: ${outputCharacters.toFixed(4)} Ã· 1000 = ${outputUnits} units</p>
                    <p>Total Units per Month: ${totalUnitsPerRequest} units Ã— ${requests} requests = ${totalUnits} units</p>
                </div>

                <div class="detailed-step">
                    <h3>Cost Breakdown</h3>
                    <p>Content Filter: ${totalUnits} Ã— $0.15/1000 = ${contentFilterCost.toFixed(4)} USD</p>
                    <p>Denied Topics: ${totalUnits} Ã— $0.15/1000 = ${deniedTopicsCost.toFixed(4)} USD</p>
                    <p>Contextual Grounding: ${totalUnits} Ã— $0.10/1000 = ${contextualGroundingCost.toFixed(4)} USD</p>
                    <p>PII Filter: ${totalUnits} Ã— $0.10/1000 = ${piiFilterCost.toFixed(4)} USD</p>
                </div>
            `;

            document.getElementById("guardrails-detailed-breakdown").style.display = "block";
        }

        // Add copy functionality
        function copyResults(elementId) {
            const element = document.getElementById(elementId);
            let formattedContent = '';
            
            // Remove copy button and success message from the content
            const contentToCopy = element.cloneNode(true);
            const copyButton = contentToCopy.querySelector('.copy-button');
            const successMessage = contentToCopy.querySelector('.copy-success');
            if (copyButton) copyButton.remove();
            if (successMessage) successMessage.remove();
            
            if (elementId.includes('result')) {
                // Format for results
                const items = contentToCopy.querySelectorAll('.result-item');
                items.forEach(item => {
                    const spans = item.querySelectorAll('span');
                    if (spans.length === 2) {
                        formattedContent += `${spans[0].textContent.trim()}: ${spans[1].textContent.trim()}\n`;
                    }
                });
            } else if (elementId.includes('detailed-breakdown') || elementId.includes('result-details')) {
                // Format for detailed breakdown
                const steps = contentToCopy.querySelectorAll('.detailed-step');
                steps.forEach(step => {
                    const title = step.querySelector('h3');
                    if (title) {
                        formattedContent += `${title.textContent.trim()}\n`;
                    }
                    const paragraphs = step.querySelectorAll('p');
                    paragraphs.forEach(p => {
                        formattedContent += `${p.textContent.trim()}\n`;
                    });
                    formattedContent += '\n';
                });
            }
            
            // Copy the formatted content
            navigator.clipboard.writeText(formattedContent).then(() => {
                const successMessage = element.querySelector('.copy-success');
                successMessage.classList.add('show');
                
                setTimeout(() => {
                    successMessage.classList.remove('show');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        }

        function resetGuardrailsCalculator() {
            document.getElementById("inputTokens").value = "";
            document.getElementById("outputTokens").value = "";
            document.getElementById("requests").value = "";
            
            // Remove error classes and messages
            ["inputTokens", "outputTokens", "requests"].forEach(id => {
                const el = document.getElementById(id);
                el.classList.remove('error');
                el.nextElementSibling.textContent = "";
            });

            document.getElementById("guardrails-results").innerHTML = "";
            document.getElementById("guardrails-detailed-breakdown").innerHTML = "";
            document.getElementById("guardrails-detailed-breakdown").style.display = "none";
        }

        // Update the calculation function
        function calculateTextModelCost() {
            // Validate all inputs first
            const inputs = ['textInputTokens', 'textOutputTokens', 'requestsPerMonth'];
            let hasError = false;
            
            inputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (!validateIntegerInput(input)) {
                    hasError = true;
                }
            });

            // Check if model is selected
            const modelSelect = document.getElementById('modelSelect');
            if (!modelSelect.value) {
                modelSelect.classList.add('error');
                hasError = true;
            } else {
                modelSelect.classList.remove('error');
            }
            
            if (hasError) return;
            
            // Get values
            const inputTokens = parseInt(document.getElementById('textInputTokens').value);
            const outputTokens = parseInt(document.getElementById('textOutputTokens').value);
            const requestsPerMonth = parseInt(document.getElementById('requestsPerMonth').value);
            const inputTokenPrice = parseFloat(document.getElementById('inputTokenPrice').value);
            const outputTokenPrice = parseFloat(document.getElementById('outputTokenPrice').value);
            
            // Calculate costs
            const totalInputCost = (inputTokenPrice / 1000) * inputTokens * requestsPerMonth;
            const totalOutputCost = (outputTokenPrice / 1000) * outputTokens * requestsPerMonth;
            const totalCost = totalInputCost + totalOutputCost;

            const selectedModel = document.getElementById('modelSelect').value;
            
            // Update results with copy button
            updateResults('text-model-result', `
                <button class="copy-button" onclick="copyResults('text-model-result')" title="Copy results">
                    <i class="fas fa-copy"></i>
                </button>
                <div class="copy-success">Copied!</div>
                <div class="result-item">
                    <span>Selected Model : </span>
                    <span>${selectedModel}</span>
                </div>
                <div class="result-item">
                    <span>Monthly Input Token Cost : </span>
                    <span>${totalInputCost.toFixed(4)} USD</span>
                </div>
                <div class="result-item">
                    <span>Monthly Output Token Cost : </span>
                    <span>${totalOutputCost.toFixed(4)} USD</span>
                </div>
                <div class="result-item">
                    <span>Total Monthly Cost : </span>
                    <span>${totalCost.toFixed(4)} USD</span>
                </div>
            `);

            // Update detailed breakdown with copy button
            updateResults('text-model-result-details', `
                <button class="copy-button" onclick="copyResults('text-model-result-details')" title="Copy details">
                    <i class="fas fa-copy"></i>
                </button>
                <div class="copy-success">Copied!</div>
                <div class="detailed-step">
                    <h3>Model Details</h3>
                    <p>Model: ${selectedModel}</p>
                    <p>Input Price: $${inputTokenPrice}/1000 tokens</p>
                    <p>Output Price: $${outputTokenPrice}/1000 tokens</p>
                </div>
                <div class="detailed-step">
                    <h3>Token Calculations</h3>
                    <p>Input: ${inputTokens} tokens Ã— ${requestsPerMonth} requests = ${inputTokens * requestsPerMonth} tokens</p>
                    <p>Output: ${outputTokens} tokens Ã— ${requestsPerMonth} requests = ${outputTokens * requestsPerMonth} tokens</p>
                </div>
                <div class="detailed-step">
                    <h3>Cost Breakdown</h3>
                    <p>Input Cost: (${inputTokenPrice}/1000) Ã— ${inputTokens * requestsPerMonth} = ${totalInputCost.toFixed(4)} USD</p>
                    <p>Output Cost: (${outputTokenPrice}/1000) Ã— ${outputTokens * requestsPerMonth} = ${totalOutputCost.toFixed(4)} USD</p>
                    <p>Total: ${totalInputCost.toFixed(4)} + ${totalOutputCost.toFixed(4)} = ${totalCost.toFixed(4)} USD</p>
                </div>
            `);
        }

        // Update the reset function to clear error states
        function resetTextModelCalculator() {
            document.getElementById('regionSelect').selectedIndex = 0;
            document.getElementById('providerSelect').innerHTML = '<option value="">Select Provider</option>';
            document.getElementById('providerSelect').disabled = true;
            document.getElementById('modelSelect').innerHTML = '<option value="">Select Model</option>';
            document.getElementById('modelSelect').disabled = true;
            
            ['textInputTokens', 'textOutputTokens', 'requestsPerMonth'].forEach(id => {
                const el = document.getElementById(id);
                el.value = '';
                el.classList.remove('error');
                document.getElementById(id + 'Error').textContent = "";
            });
            
            document.getElementById('text-model-result').innerHTML = '';
            document.getElementById('text-model-result-details').innerHTML = '';
        }

        // function calculate
        // Embedding Cost Calculator Functions
        function calculateEmbeddingCost() {
            const embedType = document.getElementById('embedType').value;
            const modelType = document.getElementById('modelType').value;
            const embedInputValue = parseFloat(document.getElementById('embedInputValue').value);

            let embedTokenPrice;
            let modelName;

            // Set embedTokenPrice and modelName based on modelType
            if (modelType === "amzonEv1") {
                embedTokenPrice = 0.0001;
                modelName = "Amazon Titan Text Embedding v1";
            } else if (modelType === "amzonEv2") {
                embedTokenPrice = 0.00002;
                modelName = "Amazon Titan Text Embedding v2";
            } else if (modelType === "CoherePlain") {
                embedTokenPrice = 0.0001;
                modelName = "Cohere Embed English";
            } else if (modelType === "CohereMultiLingual") {
                embedTokenPrice = 0.0001;
                modelName = "Cohere Embed Multilingual";
            }

            let totalEmbedCost;
            let totalTokens;

            if (embedType === 'gb') {
                totalTokens = embedInputValue * 161000000;
                totalEmbedCost = (embedTokenPrice / 1000) * totalTokens;
            } else if (embedType === 'millionTokens') {
                totalTokens = embedInputValue * 1000000;
                totalEmbedCost = (embedTokenPrice / 1000) * totalTokens;
            } else if (embedType === 'tokens') {
                totalTokens = embedInputValue;
                totalEmbedCost = (embedTokenPrice / 1000) * totalTokens;
            }

            document.getElementById('embedding-result').innerHTML = `
                <button class="copy-button" onclick="copyResults('embedding-result')" title="Copy results">
                    <i class="fas fa-copy"></i>
                </button>
                <div class="copy-success">Copied!</div>
                <div class="result-item">
                    <span>Selected Model : </span>
                    <span>${modelName}</span>
                </div>
                <div class="result-item">
                    <span>Total Monthly Embedding Cost : </span>
                    <span>${totalEmbedCost.toFixed(4)} USD</span>
                </div>
            `;

            document.getElementById('embedding-result-details').innerHTML = `
                <button class="copy-button" onclick="copyResults('embedding-result-details')" title="Copy details">
                    <i class="fas fa-copy"></i>
                </button>
                <div class="copy-success">Copied!</div>
                <div class="detailed-step">
                    <h3>Model Details</h3>
                    <p>Model: ${modelName}</p>
                    <p>Price: $${embedTokenPrice}/1000 tokens</p>
                </div>
                <div class="detailed-step">
                    <h3>Input Details</h3>
                    <p>Type: ${embedType === 'gb' ? 'Data Size' : embedType === 'millionTokens' ? 'Million Tokens' : 'Tokens'}</p>
                    <p>Value: ${embedInputValue} ${embedType === 'gb' ? 'GB' : embedType === 'millionTokens' ? 'Million' : ''}</p>
                </div>
                <div class="detailed-step">
                    <h3>Token Calculation</h3>
                    <p>${embedType === 'gb' ? `Converting GB to Tokens: ${embedInputValue} GB Ã— 161,000,000 tokens/GB = ${totalTokens.toLocaleString()} tokens` :
                      embedType === 'millionTokens' ? `Converting Million Tokens to Tokens: ${embedInputValue} million Ã— 1,000,000 = ${totalTokens.toLocaleString()} tokens` :
                      `Total Tokens: ${totalTokens.toLocaleString()}`}</p>
                </div>
                <div class="detailed-step">
                    <h3>Cost Calculation</h3>
                    <p>Token Price: $${embedTokenPrice} per 1000 tokens</p>
                    <p>Total Cost: (${embedTokenPrice} / 1000) Ã— ${totalTokens.toLocaleString()} tokens = ${totalEmbedCost.toFixed(4)} USD</p>
                </div>
            `;
        }

        function resetEmbeddingCalculator() {
            document.getElementById('modelType').selectedIndex = 0;
            document.getElementById('embedType').selectedIndex = 0;
            document.getElementById('embedInputValue').value = '';
            document.getElementById('embedding-result').innerHTML = '';
            document.getElementById('embedding-result-details').innerHTML = '';
        }

        // Initialize dropdowns on page load
        window.onload = function() {
            initializeDropdowns();
        };

        // Theme switching functionality
        function toggleTheme() {
            const html = document.documentElement;
            const themeToggle = document.querySelector('.theme-toggle i');
            
            if (html.getAttribute('data-theme') === 'dark') {
                html.setAttribute('data-theme', 'light');
                themeToggle.classList.remove('fa-sun');
                themeToggle.classList.add('fa-moon');
                localStorage.setItem('theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
                themeToggle.classList.remove('fa-moon');
                themeToggle.classList.add('fa-sun');
                localStorage.setItem('theme', 'dark');
            }
        }

        // Check for saved theme preference
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            const html = document.documentElement;
            const themeToggle = document.querySelector('.theme-toggle i');
            
            html.setAttribute('data-theme', savedTheme);
            if (savedTheme === 'dark') {
                themeToggle.classList.remove('fa-moon');
                themeToggle.classList.add('fa-sun');
            }
        });
    </script>

    <!-- <div style="text-align: center; margin-top: 20px; color: #e5eceb; padding: 10px;">
        <p>Developed by <a href="https://www.cloudthat.com/resources/author/aditya-kumar/" target="_blank" style="color: #e5eceb;">Aditya</a>. Please verify cost estimates prior to implementation.</p>
    </div> -->
</body>
</html>
